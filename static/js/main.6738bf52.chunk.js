(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(17),c=t.n(r),a=t(8),o=t(3),i=t(2),u=t(0),d=function(e){var n=e.handleNameChange,t=e.handleNumberChange,r=e.newName,c=e.newNumber,a=e.addNumber;return Object(u.jsxs)("form",{children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{onChange:n,value:r})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{onChange:t,value:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",onClick:a,children:"add"})})]})},s=function(e){var n=e.id,t=e.removeNumber;return Object(u.jsx)("button",{onClick:function(){return t(n)},children:"delete"})},l=function(e){var n=e.persons,t=e.filter,r=e.removeNumber;return Object(u.jsx)(u.Fragment,{children:n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return Object(u.jsxs)("div",{children:[e.name,"\xa0",e.number," ",Object(u.jsx)(s,{id:e.id,removeNumber:r})]},e.id)}))})},b=function(e){var n=e.handleFilterChange,t=e.filterWith;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{onChange:n,value:t})]})},h=function(e){var n=e.message;return null==n?null:Object(u.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},f=t(4),j=t.n(f),m="https://secret-shore-65991.herokuapp.com/api/persons",O=function(){return j.a.get(m).then((function(e){return e.data}))},v=function(e){return j.a.post(m,e).then((function(e){return e.data}))},p=function(e){return j.a.delete("".concat(m,"/").concat(e))},g=function(e){return j.a.put("".concat(m,"/").concat(e.id),e).then((function(e){return e.data}))},x=function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(i.useState)(""),s=Object(o.a)(c,2),f=s[0],j=s[1],m=Object(i.useState)(""),x=Object(o.a)(m,2),w=x[0],N=x[1],C=Object(i.useState)(""),y=Object(o.a)(C,2),k=y[0],S=y[1],D=Object(i.useState)(null),F=Object(o.a)(D,2),I=F[0],B=F[1];Object(i.useEffect)((function(){O().then((function(e){return r(e)}))}),[]);var E=function(e){B(e),setTimeout((function(){return B(null)}),3e3)},J=function(e){console.log(e),g(e).then((function(e){r(t.map((function(n){return n.id!==e.id?n:e}))),E("Updated ".concat(e.name))})).catch((function(n){E("Information of ".concat(e.name," has already been removed from server"))}))};return Object(u.jsxs)("div",{children:[Object(u.jsx)(h,{message:I}),Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(b,{handleFilterChange:function(e){S(e.target.value.toLowerCase())},filterWith:k}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(d,{handleNameChange:function(e){j(e.target.value)},handleNumberChange:function(e){N(e.target.value)},newName:f,newNumber:w,addNumber:function(e){e.preventDefault();var n={name:f,number:w};t.every((function(e){return e.name!==f}))?v(n).then((function(e){r(t.concat(e)),E("Added ".concat(e.name))})):window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))&&J(Object(a.a)(Object(a.a)({},n),{},{id:t.find((function(e){return e.name===f})).id})),j(""),N("")}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(l,{persons:t,filter:k,removeNumber:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Delete ".concat(n,"?"))&&p(e).then((function(c){r(t.filter((function(n){return n.id!==e}))),E("Deleted ".concat(n))})).catch((function(e){E("Information of ".concat(n," has already been removed from server"))}))}})]})};c.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.6738bf52.chunk.js.map